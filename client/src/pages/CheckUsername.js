import { useState } from 'react'
import { Typography, Box, Button, Input } from "@mui/material"
import { Controller, useForm } from 'react-hook-form'
import request from '../api'
const CheckUsername = () => {
  const [isLoading, setIsLoading] = useState(false)
  const [userBreaches, setUserBreaches] = useState({})
  const { control, handleSubmit } = useForm({
    defaultValues: {
      username: ''
    }
  })

  const handlOnSubmit = async (data) => {
    setUserBreaches({})
    const username = data?.username
    const response = await request({ route: `/check-username?user=${username}` })
    setUserBreaches(response)
  }
  return (
    <Box>
      <Typography component='h1' variant='h5' >Check Username</Typography>
      <Box>
        <Typography>Use the form to check and see if you username has been compromised in any known security breaches.</Typography>
        <Box
          component='form'
          onSubmit={handleSubmit(handlOnSubmit)}
          sx={{
            mt: 8,
            display: 'flex',
            justifyContent: 'center'
          }}
        >
          <Controller
            name="username"
            control={control}
            render={({ field }) => <Input placeholder="Username" {...field} />}
          />
          <Button type='submit'>Check</Button>
        </Box>

      </Box>

    </Box>
  )
}

export default CheckUsername