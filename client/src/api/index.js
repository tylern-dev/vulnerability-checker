

const request = async ({ route, method = 'GET' }) => {
  const apiCredentials = JSON.parse(localStorage.getItem('keys'))
  const apiKey = apiCredentials.apiKey
  const apiSecret = apiCredentials.apiSecret

  const response = await fetch(route, {
    headers: {
      'x-api-key': apiKey,
      'x-secret': apiSecret
    },
    method: method
  })
  console.log(response)
  if(response.ok){
    
    return await response.json()
  }
  else {
    const {error} = await response.json()
    throw new Error(error)
  }

  
}

export default request