import { useAuthContext } from "../providers/auth-provider"

const request = async ({ route, method = 'GET' }) => {
  const apiCredentials = JSON.parse(localStorage.getItem('keys'))
  const apiKey = apiCredentials.apiKey
  const apiSecret = apiCredentials.apiSecret

  try {
    const response = await fetch(route, {
      headers: {
        'x-api-key': apiKey,
        'x-secret': apiSecret
      },
      method: method
    })

    const data = await response.json()
    return data
  } catch (error) {
    throw new Error(error)
  }
}

export default request